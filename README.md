# 원티드 프리온보딩 백엔드 인턴십(10월) 사전과제

## 📝 API 명세

| 완료    | Method   | End Point                        | 기능             |
|-------|----------|----------------------------------|----------------|
| - [x] | POST     | `/api/v1/jobs`                   | 채용공고 등록        |
| - [ ] | PUT      | `/api/v1/jobs/{job_id}`          | 채용공고 수정        |
| - [ ] | DELETE   | `/api/v1/jobs/{job_id}`          | 채용공고 삭제        |
| - [ ] | GET      | `/api/v1/jobs`                   | 채용공고 전체 조회     |
| - [ ] | GET      | `/api/v1/jobs?keyword={keyword}` | 채용공고 키워드 검색 조회 |
| - [ ] | GET      | `/api/v1/jobs/{job_id}`          | 채용공고 상세 조회     |
| - [ ] | POST     | `/api/v1/apply`                  | 채용 지원          |

## ⚙️ 기능
기능별 요구사항 분석 및 구현과정 포함 필요

### 1. 채용공고 등록
#### 개요
회사가 채용공고를 등록함
#### 요구사항 분석
- 채용 포지션은 여러 범주가 섞인 복합 데이터이므로 직군, 직무, 경력 세 종류로 구분
- 기술은 여러 개를 입력할 수 있도록 문자열 list로 입력 받음
#### Request
```json
{
   "companyId": 1,
   "group": "개발",
   "position": "백엔드 개발자",
   "career": "주니어",
   "reward": 1000000,
   "content": "원티드랩에서 백엔드 주니어 개발자를 채용합니다. 자격요건은..",
   "skills": [ "Java", "Spring Framework", "JPA", "SQL" ]
}
```
#### Response
```json
// 201 Created
{
   "message": "채용공고가 등록되었습니다."
}
```

```json
// 400 Bad Request
// 시간 남으면 세부 case로 분할
{
   "message": "입력이 유효하지 않습니다." 
}
```
#### 구현과정
- 프론트 입장에서 필요한 요청과 응답을 기반으로 하여 필요 도메인을 도출했습니다.
- 이를 위해 컨트롤러 테스트를 바탕으로 레포지토리와 서비스의 테스트 작성 및 실제 비즈니스 로직 작성 순서로 작업을 진행했습니다.
- 성공과 실패 케이스가 공통된 응답을 갖도록 공통 응답 객체를 정의했습니다.
- 유효하지 않은 입력의 종류는 많겠으나 작업 기한을 고려하여 예외를 일반화하고 우선적으로 성공 케이스에 대해 완성시키는 것을 목적으로 삼았습니다.
- 채용공고라는 도메인은 회사, 기술에 종속적이므로 이들을 먼저 정의했고, 더미데이터를 작성했습니다.
- 직군, 직무, 경력은 상수이므로 `@JsonValue`를 이용하여 바인딩되게 했고, 바인딩 예외의 경우 `GlobalExceptionHandler`에서 처리하게 했습니다.
- 채용공고 도메인을 작성하고, ID, 생성시각, 수정시각을 자동생성하는 별도의 base 엔티티를 정의하여 활용했습니다.
- 채용공고는 기술을 리스트로 갖기 때문에 '채용공고 기술(`JobSkill`)'이라는 중간 테이블을 두었습니다.
- 당장 프로덕션 코드에서는 불필요하지만, 채용공고 기술 테이블의 저장 검증을 위해 개발 전용의 Profile을 이용하여 조회 메소드를 작성

### 2. 채용공고 수정
#### 개요
- 회사가 채용공고를 수정함
- 회사의 ID 외에 채용공고의 모든 정보 수정 가능 
#### 요구사항 분석
- 변경할 데이터만 받는 것도 방법일 수 있는데, 그렇게 하면 `@NotNull`를 이용하지 못하고 프로퍼티별로 Null 체크를 해야 한다. 
  편의를 위하여 FE에 양해를 구하고 변경하지 않을 데이터 포함 모든 데이터를 다 받는다고 생각하자.
- 작업 기한에 따른 구현의 편의를 고려하여 수정된 내용이 없더라도 일관되게 200으로 응답한다.
#### Request
```http request
PUT localhost:8080/api/v1/jobs/1 HTTP/1.1

{
   "group": "개발",
   "position": "백엔드 개발자",
   "career": "주니어",
   "reward": 2000000,
   "content": "원티드랩에서 백엔드 주니어 개발자를 '적극' 채용합니다. 자격요건은..",
   "skills": [ "Java", "Spring Framework", "JPA", "SQL" ]
}
```
#### Response
성공: `200 OK`
```json
{
   "message": "채용공고가 수정되었습니다."
}
```
실패: `400 Bad Request`
  - 시간 남으면 세부 case로 분할
```json
{
   "message": "입력이 유효하지 않습니다." 
}
```

### 3. 채용공고 삭제
#### 개요
회사가 채용공고를 삭제함 <br/>

### 4-1. 채용공고 목록 전체 조회
#### 개요
사용자가 채용공고의 목록을 조회함 <br/>

### 4-2. 채용공고 목록 키워드 검색 조회
#### 개요
사용자가 키워드를 활용하여 채용공고의 목록을 조회함 <br/>

### 5. 채용공고 상세 조회
#### 개요
사용자가 특정 채용공고의 상세 정보를 조회함 <br/>
목록 조회와 다르게 "채용내용"이 포함됨 <br/>

### 6. 채용 지원
#### 개요
사용자가 특정 채용공고에 지원함 <br/>
한 사용자는 특정 채용공고에 대하여 1회만 지원 가능 <br/>

## 🚎 Git 커밋 메시지 컨벤션
| tag      | 설명                              | 
|----------|---------------------------------|
| setup    | 프로젝트 설정 관련 수정                   |
| docs     | 문서 수정                           |
| feat     | 새로운 기능 추가                       |
| refactor | 기능 변경 없는 코드 구조 변경               |
| fix      | 기능 수정 및 오류 해결                   |
| test     | 테스트 추가 및 수정                     |
| style    | 컨벤션 일치화, 빈 줄 추가 및 삭제, 포매팅 등의 수정 |

## 🪧 코드 컨벤션
1. 제어문의 소괄호, 중괄호, 연산자 열기 전, 닫은 후는 항상 빈 칸 추가
2. 제어문의 내용이 한 줄이라도 항상 중괄호 사용 및 줄바꿈
3. 메소드명은 항상 현재형 동사로 시작
    ```java
    public void validateIfSomethingIsValid() {
        if (numCompanies + numJobs == 0) {
            throw new CirtainException();
        }
        // something to do...
    }
    ```
4. 모든 파일의 마지막에 빈 줄 필수
